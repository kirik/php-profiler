!function(){let t={_table:null,_crc32GetTable:function(){if(null===this._table){this._table=[];for(let e=0;e<256;e++){for(var t=e,a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;this._table[e]=t}}return this._table},calc:function(e){for(var t=this._crc32GetTable(),a=-1,r=0;r<e.length;r++)a=a>>>8^t[255&(a^e.charCodeAt(r))];return(-1^a)>>>0}},a={_colors:["#999999","#CCFF00","#336600","#00FFCC","#CCFF66","#009999","#669933","#6633FF","#FF3366","#993300","#3399FF","#CC6633","#333366","#CC66FF","#006666","#00FFFF","#0033FF","#336633","#CC0066","#CC6600","#3333CC","#CC0033","#99FF99","#CCFF33","#CCCC66","#660033","#9966FF","#006699","#99FFCC","#00FF66","#FFCCCC","#FF3399","#FFCC66","#FF0066","#33FF00","#000000","#FF6699","#66FFFF","#339999","#CC33FF","#0066CC","#FF33CC","#99CCFF","#CC3300","#99CC99","#009900","#9966CC","#CC9999","#339933","#000066","#6600FF","#006633","#33FFFF","#33CC99","#00FF33","#663333","#330033","#000033","#9933CC","#666600","#669966","#990033","#66CC33","#33FF99","#666699","#00CC99","#00CCCC","#FF9999","#996699","#660066","#663300","#00CC00","#FFFF99","#00CC33","#330000","#FF6666","#CC00CC","#66FF66","#6600CC","#FFFF00","#9999FF","#CC99CC","#CC3399","#66FF99","#9933FF","#FF99FF","#99CC00","#00CCFF","#CC0099","#CC3333","#3366FF","#33CCCC","#66CCCC","#3300CC","#0033CC","#6666CC","#0066FF","#996666","#CCCCCC","#99FF66","#996600","#669999","#333333","#FFFF66","#9900FF","#333399","#33FF33","#00FF00","#003300","#66FFCC","#99CC33","#CCFFFF","#33FF66","#33CC00","#333300","#FFFF33","#66CC66","#FFCC33","#99CCCC","#999900","#CC0000","#6666FF","#FF66FF","#666666","#669900","#66FF00","#CC3366","#3366CC","#FF9933","#3399CC","#FF0000","#FF33FF","#FF9966","#CC9900","#FF00FF","#CC99FF","#0000FF","#CC33CC","#CCFFCC","#CCCC00","#99FFFF","#003333","#FF0099","#CCCCFF","#660000","#33CCFF","#FF3333","#993399","#3333FF","#CC6699","#993366","#663366","#990099","#99CC66","#CC66CC","#FF9900","#9900CC","#006600","#6699CC","#CC9933","#33FFCC","#FF00CC","#0000CC","#33CC33","#FFCC99","#0099CC","#993333","#33CC66","#6699FF","#CCCC99","#00CC66","#FFFFCC","#99FF33","#009933","#003399","#00FF99","#339966","#666633","#0099FF","#330066","#FF6600","#339900","#003366","#990000","#999966","#FF6633","#990066","#FF66CC","#999933","#3300FF","#FFCC00","#CCFF99","#009966","#66FF33","#CC6666","#9999CC","#66CC00","#FF99CC","#FFCCFF","#000099","#CC00FF","#CC9966","#663399","#660099","#336666","#CCCC33","#66CC99","#336699","#996633","#99FF00","#6633CC","#330099","#66CCFF","#FF3300","#FF0033"],getColor:function(e){return this._colors[t.calc(e)%this._colors.length]}},B={defaultIframeHeightPx:250,minimizedIframeHeightPx:45,lsPoppedOut:"__profilerPoppedOut",lsIframeSize:"__profilerIframeSize",lsPreselectedTab:"__profilerPreselectedTab",dom:{currentDocument:null,profilerContainer:null,parentPageIframeContainer:null,parentPageIframe:null,renderIframe:function(e,t){localStorage.removeItem(B.lsPoppedOut),this.profilerContainer=t,this.parentPageIframe.contentDocument.head.innerHTML=`<style>${e}</style>`,this.parentPageIframe.contentDocument.body.appendChild(t),this.parentPageIframeContainer.style.display="block";var a=parseInt(localStorage.getItem(B.lsIframeSize))||B.defaultIframeHeightPx;return this.parentPageIframeContainer.style.height=a+"px",document.body.style.marginBottom=a+"px",t.getElementsByClassName("header-ctrl-pop-out")[0].onclick=function(){document.body.style.marginBottom="0px",B.dom.getWindow(e,t)},t.getElementsByClassName("header-ctrl-minimize")[0].onclick=function(){parseInt(B.dom.parentPageIframeContainer.style.height)===parseInt(B.minimizedIframeHeightPx)?B.dom.parentPageIframeContainer.style.height=B.defaultIframeHeightPx+"px":B.dom.parentPageIframeContainer.style.height=B.minimizedIframeHeightPx+"px"},this.currentDocument=this.parentPageIframe.contentDocument,t},render:function(e){1!==parseInt(localStorage.getItem(B.lsPoppedOut))?this.renderIframe(e,document.getElementById("__web_profiler_container")):this.getWindow(e,document.getElementById("__web_profiler_container"))},getWindow:function(e,t){this.parentPageIframeContainer.style.display="none";var a=window.open("","web_profiler_window",["toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=no","resizable=yes","width=1280,height=600"].join(","));if(!a)return console.log("Could not open profiler in external window, embedding as iframe"),B.dom.renderIframe(e,t),!1;document.body.style.marginBottom="0px",a.parentPagePlaceholder||(a.document.head.innerHTML=`<title>WEB Profiler</title>
                    <style>
                        #__web_profiler_container .header .header-ctrl a.header-ctrl-pop-out,
                        #__web_profiler_container .header .header-ctrl a.header-ctrl-minimize {display: none}
                        ${e}
                    </style>`,a.document.body.appendChild(t),localStorage.setItem(B.lsPoppedOut,1)),a.parentPagePlaceholder=this.parentPageIframe,a.onbeforeunload=function(){B.dom.renderIframe(e,a.document.getElementById("__web_profiler_container"))},this.profilerContainer=a.document,this.currentDocument=a.document},getContainer:function(){return this.profilerContainer},getRequests:function(){return this.getContainer().getElementsByClassName("requests")[0]},getCollectorTabs:function(){return this.getContainer().getElementsByClassName("header-tabs")[0]},getCollectorData:function(){return this.getContainer().getElementsByClassName("collector-data")[0]}},init:function(e){var t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("load",function(){try{var e=JSON.parse(this.responseText);e.__profiler&&B.addRequest(e.__profiler,!1)}catch(e){}}),t.apply(this,arguments)},this.dom.parentPageIframeContainer=document.getElementById("__profiler_iframe_container"),this.dom.parentPageIframe=this.dom.parentPageIframeContainer.getElementsByTagName("iframe")[0],new ResizeObserver(function(e){let t=Math.max(parseInt(B.dom.parentPageIframeContainer.style.height),B.minimizedIframeHeightPx);t&&(document.body.style.marginBottom=t+"px",localStorage.setItem(B.lsIframeSize,t+"px"),setTimeout(function(){t>B.minimizedIframeHeightPx?(B.dom.parentPageIframeContainer.style.overflowX="scroll",B.dom.parentPageIframeContainer.style.resize="vertical",B.dom.getRequests().style.overflowY="auto"):(B.dom.parentPageIframeContainer.style.overflowX="hidden",B.dom.parentPageIframeContainer.style.resize="none",B.dom.getRequests().style.overflowY="hidden")},0))}).observe(this.dom.parentPageIframeContainer),"undefined"!=typeof InstallTrigger?this.dom.parentPageIframe.onload=function(){B.dom.render(e.css),B.addRequest(e.data,!0)}:(this.dom.render(e.css),this.addRequest(e.data,!0))},addRequest:function(e,t=!0){var a,r=0;for(a in e.collectors_data)r+=e.collectors_data[a].duration;var n,o="";for(n in e.collectors_data){var i=e.collectors_data[n];o+='<div style="background-color: '+this.getCollectorColor(i.props)+";  width: "+Math.round(i.duration/r*1e4)/100+'%"></div>'}var s,l=document.createElement("a");l.requestData=e,l.classList.add("request"),l.innerHTML='<div class="uri"><span class="ellipsis">'+e.request_uri+'</span><div class="stat">'+this.view.formatSeconds(e.duration)+" / "+this.view.formatBytes(e.peak_memory)+'</div></div><div class="timing">'+o+"</div>",this.dom.getRequests().prepend(l);for(s of this.dom.getRequests().getElementsByTagName("a"))s.onclick=this.selectRequest;t&&l.click()},selectRequest:function(e){e.preventDefault();for(var t of B.dom.getRequests().getElementsByClassName("active"))t.classList.remove("active");this.classList.add("active"),B.dom.getCollectorTabs().innerHTML="",B.dom.getCollectorData().innerHTML="",B.addCollectors(this.requestData)},getCollectorTab:function(e){var t=document.createElement("a");return t.collectorData=e,t.innerHTML=e.props.title+" <sup>"+t.collectorData.data.length+"</sup>",t.href="#",t.style.borderTop="3px solid "+this.getCollectorColor(e.props),t.onclick=function(e){e.preventDefault(),B.selectTab(this)},t},getCollectorColor:function(e){return"cssColor"in e?e.cssColor:a.getColor(e.title)},addCollectors:function(e){var t,a=[];for(t in e.collectors_data){var r,n=e.collectors_data[t],o=this.getCollectorTab(n);for(r in o.id="tab_"+t,this.dom.getCollectorTabs().appendChild(o),n.data){var i=n.data[r];"__start_time"in i&&"__duration"in i&&a.push({start_time:i.__start_time,duration:i.__duration,tab:o,tabIndex:r,color:this.getCollectorColor(n.props)})}}a.sort(function(e,t){return e.start_time-t.start_time});var s=this.getCollectorTab({props:{title:"Summary",cssColor:"white",template:"summary"},start_time:e.start_time,duration:e.duration,data:a}),l=(s.id="tab-summary",this.dom.getCollectorTabs().appendChild(s),this.dom.currentDocument.getElementById(localStorage.getItem(this.lsPreselectedTab)+""));(l||s).click()},selectTab:function(e,t=null){for(var a of B.dom.getCollectorTabs().getElementsByClassName("active"))a.classList.remove("active");e.classList.add("active"),B.renderCollector(e.collectorData,t),null===t&&localStorage.setItem(B.lsPreselectedTab,e.id)},renderCollector:function(e,t){this.dom.getCollectorData().replaceChildren(this.view.templates[e.props.template](e,t))},view:{formatSeconds:function(e,t=2){return 60<e?Math.round(e/60)+"m":1<=e?e.toFixed(t)+"s":.001<e?Math.round(1e3*e)+"ms":Math.round(1e6*e)+"Î¼s"},formatBytes:function(e,t=2){var a;return+e?(t=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024)),""+parseFloat((e/Math.pow(1024,a)).toFixed(t))+["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][a]):"0B"},formatUnixtime:function(e){return new Date(1e3*parseInt(e)).toLocaleTimeString()},templates:{summary:function(t,e){var a,r=document.createElement("div"),n=(r.classList.add("collector-data-summary"),document.createElement("div")),o=(n.classList.add("waterfall"),document.createElement("div"));for(a in o.classList.add("request-time"),o.textContent=B.view.formatSeconds(t.duration),n.appendChild(o),t.data){let e=t.data[a];var i=document.createElement("div"),s=(i.classList.add("step"),(e.start_time-t.start_time)/t.duration*100),l=s+e.duration/t.duration*100;i.style.paddingLeft=l+"%",i.style.background="linear-gradient(to right, transparent "+s+"%, "+e.color+" "+s+"%, "+e.color+" "+l+"%, transparent "+l+"%)",i.innerHTML="&nbsp;"+B.view.formatSeconds(e.duration),i.onclick=function(){B.selectTab(e.tab,e.tabIndex)},n.appendChild(i)}return r.appendChild(n),r},html:function(e,t){var a,r=e.props.metrics,n=document.createElement("div");for(a in n.classList.add("collector-data-html"),e.data){var o,i,s=e.data[a];for(o in r)o in s&&((i=document.createElement("h2")).textContent=r[o].title,n.appendChild(i),(i=document.createElement("div")).innerHTML=s[o],n.appendChild(i))}return n},table:function(e,t){var a=e.props.metrics,r=document.createElement("thead");let C=document.createElement("tbody");var n,o={},i={sums:{},add:function(e,t){e in this.sums||(this.sums[e]=0),this.sums[e]+=t},getSum:function(e){return this.sums[e]},hasData:function(){return 0<Object.keys(this.sums).length}};for(n in e.data){var s,l=e.data[n],d=document.createElement("tr");for(s in d.sortValue=n,C.appendChild(d),a){var c=a[s],m="-",u=0,F={classList:[],checkThreshold:function(e,t,a){void 0!==a&&a<=e?this.add("threshold-max"):void 0!==t&&t<=e&&this.add("threshold-min")},add:function(e){this.classList.push(e)}};if(s in l&&"__start_time"!==s&&"__duration"!==s){var h,p=document.createElement("td"),f=l[s];switch(c.type){case"seconds":u=parseFloat(f),m=B.view.formatSeconds(u),F.checkThreshold(u,c.thresholdMin,c.thresholdMax),i.add(s,u),p.textContent=m;break;case"bytes":u=parseFloat(f),m=B.view.formatBytes(u),F.checkThreshold(u,c.thresholdMin,c.thresholdMax),i.add(s,u),p.textContent=m;break;case"unixtime":u=parseInt(f),m=B.view.formatUnixtime(u),F.checkThreshold(u,c.thresholdMin,c.threshholdMax),p.textContent=m;break;case"integer":u=m=parseInt(f),F.checkThreshold(u,c.thresholdMin,c.threshholdMax),i.add(s,u),p.textContent=m;break;case"json":p.innerHTML=this._jsonSyntaxHighlight(JSON.stringify(JSON.parse(f),void 0,2)),F.add("json"),u=0;break;case"text":F.add("text"),o[m=f.toString()]?(o[m].classList.add("threshold-dup"),F.add("threshold-dup")):o[m]=p,u=m.toLowerCase().substring(0,32),p.ondblclick=function(e){e.preventDefault();var e=B.dom.parentPageIframe.contentDocument||B.dom.parentPageIframe.contentWindow.document,t=B.dom.parentPageIframe.contentWindow||B.dom.parentPageIframe.contentDocument.defaultView,a=e.createRange();a.selectNode(this),t.getSelection().removeAllRanges(),t.getSelection().addRange(a),e.execCommand("copy"),t.getSelection().removeAllRanges()},p.textContent=m;break;default:u=(m=f.toString()).toLowerCase().substring(0,32),p.textContent=m}for(h in p.sortValue=u,F.classList)p.classList.add(F.classList[h]);d.appendChild(p)}}}var g,_,v,y=document.createElement("tr");for(g in r.appendChild(y),a)"__start_time"!==g&&"__duration"!==g&&(_=a[g],(v=document.createElement("th")).textContent=_.title,v.style.cursor="ns-resize",v.onclick=function(e){for(var t,a,r=this,n=C,o=Array.prototype.indexOf.call(r.parentNode.children,r),i=!0,s=("n-resize"===r.style.cursor?(t=1,r.style.cursor="s-resize"):"s-resize"===r.style.cursor?(t=0,r.style.cursor="ns-resize"):(t=-1,r.style.cursor="n-resize"),n.rows);i;){for(var i=!1,l=0;l<s.length-1;l++)if(a=!1,0===t){var d=s[l],c=s[l+1];if(d.sortValue>c.sortValue){a=!0;break}}else{d=s[l].getElementsByTagName("td")[o],c=s[l+1].getElementsByTagName("td")[o];if(1===t){if(d.sortValue>c.sortValue){a=!0;break}}else if(-1===t&&d.sortValue<c.sortValue){a=!0;break}}a&&(s[l].parentNode.insertBefore(s[l+1],s[l]),i=!0,0)}},y.appendChild(v));if(i.hasData()){var b,I=document.createElement("tr");for(b in r.appendChild(I),a)if("__start_time"!==b&&"__duration"!==b){var x=a[b],P=document.createElement("th"),w=i.getSum(b)||"";switch(x.type){case"seconds":P.textContent=B.view.formatSeconds(w);break;case"bytes":P.textContent=B.view.formatBytes(w);break;default:P.textContent=w.toString()}I.appendChild(P)}}var T=document.createElement("div"),E=(T.classList.add("collector-data-table"),T.classList.add("tableFixHead"),document.createElement("table"));return E.appendChild(r),E.appendChild(C),T.appendChild(E),null!==t&&setTimeout(function(){C.rows[t].scrollIntoView({block:"start",behavior:"smooth"}),C.rows[t].style.backgroundColor="#95ff8d"},0),T},_jsonSyntaxHighlight:function(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})}}}};
/*!initJson*/
B.init(initJson),B}();
