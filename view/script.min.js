!function(){let L={defaultIframeHeightPx:250,minimizedIframeHeightPx:45,lsPoppedOut:"__profilerPoppedOut",lsIframeSize:"__profilerIframeSize",lsPreselectedTab:"__profilerPreselectedTab",dom:{currentDocument:null,profilerContainer:null,parentPageIframeContainer:null,parentPageIframe:null,renderIframe:function(e,t){localStorage.removeItem(L.lsPoppedOut),this.profilerContainer=t,this.parentPageIframe.contentDocument.head.innerHTML=`<style>${e}</style>`,this.parentPageIframe.contentDocument.body.appendChild(t),this.parentPageIframeContainer.style.display="block";var a=parseInt(localStorage.getItem(L.lsIframeSize))||L.defaultIframeHeightPx;return this.parentPageIframeContainer.style.height=a+"px",document.body.style.marginBottom=a+"px",t.getElementsByClassName("header-ctrl-pop-out")[0].onclick=function(){document.body.style.marginBottom="0px",L.dom.getWindow(e,t)},t.getElementsByClassName("header-ctrl-minimize")[0].onclick=function(){parseInt(L.dom.parentPageIframeContainer.style.height)===parseInt(L.minimizedIframeHeightPx)?L.dom.parentPageIframeContainer.style.height=L.defaultIframeHeightPx+"px":L.dom.parentPageIframeContainer.style.height=L.minimizedIframeHeightPx+"px"},this.currentDocument=this.parentPageIframe.contentDocument,t},render:function(e){1!==parseInt(localStorage.getItem(L.lsPoppedOut))?this.renderIframe(e,document.getElementById("__web_profiler_container")):this.getWindow(e,document.getElementById("__web_profiler_container"))},getWindow:function(e,t){this.parentPageIframeContainer.style.display="none";var a=window.open("","web_profiler_window",["toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=no","resizable=yes","width=1280,height=600"].join(","));if(!a)return console.log("Could not open profiler in external window, embedding as iframe"),L.dom.renderIframe(e,t),!1;document.body.style.marginBottom="0px",a.parentPagePlaceholder||(a.document.head.innerHTML=`<title>WEB Profiler</title>
                    <style>
                        #__web_profiler_container .header .header-ctrl a.header-ctrl-pop-out,
                        #__web_profiler_container .header .header-ctrl a.header-ctrl-minimize {display: none}
                        ${e}
                    </style>`,a.document.body.appendChild(t),localStorage.setItem(L.lsPoppedOut,1)),a.parentPagePlaceholder=this.parentPageIframe,a.onbeforeunload=function(){L.dom.renderIframe(e,a.document.getElementById("__web_profiler_container"))},this.profilerContainer=a.document,this.currentDocument=a.document},getContainer:function(){return this.profilerContainer},getRequests:function(){return this.getContainer().getElementsByClassName("requests")[0]},getCollectorTabs:function(){return this.getContainer().getElementsByClassName("header-tabs")[0]},getCollectorData:function(){return this.getContainer().getElementsByClassName("collector-data")[0]}},init:function(e){var t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("load",function(){try{var e=JSON.parse(this.responseText);e.__profiler&&L.addRequest(e.__profiler,!1)}catch(e){}}),t.apply(this,arguments)},this.dom.parentPageIframeContainer=document.getElementById("__profiler_iframe_container"),this.dom.parentPageIframe=this.dom.parentPageIframeContainer.getElementsByTagName("iframe")[0],new ResizeObserver(function(e){let t=Math.max(parseInt(L.dom.parentPageIframeContainer.style.height),L.minimizedIframeHeightPx);t&&(document.body.style.marginBottom=t+"px",localStorage.setItem(L.lsIframeSize,t+"px"),setTimeout(function(){t>L.minimizedIframeHeightPx?(L.dom.parentPageIframeContainer.style.overflowX="scroll",L.dom.parentPageIframeContainer.style.resize="vertical",L.dom.getRequests().style.overflowY="auto"):(L.dom.parentPageIframeContainer.style.overflowX="hidden",L.dom.parentPageIframeContainer.style.resize="none",L.dom.getRequests().style.overflowY="hidden")},0))}).observe(this.dom.parentPageIframeContainer),"undefined"!=typeof InstallTrigger?this.dom.parentPageIframe.onload=function(){L.dom.render(e.css),L.addRequest(e.data,!0)}:(this.dom.render(e.css),this.addRequest(e.data,!0))},addRequest:function(e,t=!0){var a,r=0;for(a in e.collectors_data)r+=e.collectors_data[a].duration;var n,o="";for(n in e.collectors_data){var s=e.collectors_data[n];o+='<div style="background-color: '+s.props.cssColor+";  width: "+Math.round(s.duration/r*1e4)/100+'%"></div>'}var i,l=document.createElement("a");l.requestData=e,l.classList.add("request"),l.innerHTML='<div class="uri"><span class="ellipsis">'+e.request_uri+'</span><div class="stat">'+this.view.formatSeconds(e.duration)+" / "+this.view.formatBytes(e.peak_memory)+'</div></div><div class="timing">'+o+"</div>",this.dom.getRequests().prepend(l);for(i of this.dom.getRequests().getElementsByTagName("a"))i.onclick=this.selectRequest;t&&l.click()},selectRequest:function(e){e.preventDefault();for(var t of L.dom.getRequests().getElementsByClassName("active"))t.classList.remove("active");this.classList.add("active"),L.dom.getCollectorTabs().innerHTML="",L.dom.getCollectorData().innerHTML="",L.addCollectors(this.requestData)},getCollectorTab:function(e){var t=document.createElement("a");return t.collectorData=e,t.innerHTML=e.props.title+" <sup>"+t.collectorData.data.length+"</sup>",t.href="#",t.style.borderTop="3px solid "+e.props.cssColor,t.onclick=function(e){e.preventDefault(),L.selectTab(this)},t},addCollectors:function(e){var t,a=[];for(t in e.collectors_data){var r,n=e.collectors_data[t],o=this.getCollectorTab(n);for(r in o.id="tab_"+t.replaceAll("\\","_").toLowerCase(),this.dom.getCollectorTabs().appendChild(o),n.data){var s=n.data[r];"__start_time"in s&&"__duration"in s&&a.push({start_time:s.__start_time,duration:s.__duration,tab:o,tabIndex:r,color:n.props.cssColor})}}a.sort(function(e,t){return e.start_time-t.start_time});var i=this.getCollectorTab({props:{title:"Summary",cssColor:"white",template:"summary"},start_time:e.start_time,duration:e.duration,data:a}),l=(i.id="tab-summary",this.dom.getCollectorTabs().appendChild(i),this.dom.currentDocument.getElementById(localStorage.getItem(this.lsPreselectedTab)+""));(l||i).click()},selectTab:function(e,t=null){for(var a of L.dom.getCollectorTabs().getElementsByClassName("active"))a.classList.remove("active");e.classList.add("active"),L.renderCollector(e.collectorData,t),null===t&&localStorage.setItem(L.lsPreselectedTab,e.id)},renderCollector:function(e,t){this.dom.getCollectorData().replaceChildren(this.view.templates[e.props.template](e,t))},view:{formatSeconds:function(e,t=2){return 60<e?Math.round(e/60)+"m":1<=e?e.toFixed(t)+"s":.001<e?Math.round(1e3*e)+"ms":Math.round(1e6*e)+"Î¼s"},formatBytes:function(e,t=2){var a;return+e?(t=t<0?0:t,a=Math.floor(Math.log(e)/Math.log(1024)),""+parseFloat((e/Math.pow(1024,a)).toFixed(t))+["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][a]):"0B"},formatUnixtime:function(e){return new Date(1e3*parseInt(e)).toLocaleTimeString()},templates:{summary:function(t,e){var a,r=document.createElement("div"),n=(r.classList.add("collector-data-summary"),document.createElement("div")),o=(n.classList.add("waterfall"),document.createElement("div"));for(a in o.classList.add("request-time"),o.textContent=L.view.formatSeconds(t.duration),n.appendChild(o),t.data){let e=t.data[a];var s=document.createElement("div"),i=(s.classList.add("step"),(e.start_time-t.start_time)/t.duration*100),l=i+e.duration/t.duration*100;s.style.paddingLeft=l+"%",s.style.background="linear-gradient(to right, transparent "+i+"%, "+e.color+" "+i+"%, "+e.color+" "+l+"%, transparent "+l+"%)",s.innerHTML="&nbsp;"+L.view.formatSeconds(e.duration),s.onclick=function(){L.selectTab(e.tab,e.tabIndex)},n.appendChild(s)}return r.appendChild(n),r},html:function(e,t){var a,r=e.props.metrics,n=document.createElement("div");for(a in n.classList.add("collector-data-html"),e.data){var o,s,i=e.data[a];for(o in r)o in i&&((s=document.createElement("h2")).textContent=r[o].title,n.appendChild(s),(s=document.createElement("div")).innerHTML=i[o],n.appendChild(s))}return n},table:function(e,t){var a=e.props.metrics,r=document.createElement("thead");let m=document.createElement("tbody");var n,o={},s={sums:{},add:function(e,t){e in this.sums||(this.sums[e]=0),this.sums[e]+=t},getSum:function(e){return this.sums[e]},hasData:function(){return 0<Object.keys(this.sums).length}};for(n in e.data){var i,l=e.data[n],d=document.createElement("tr");for(i in d.sortValue=n,m.appendChild(d),a){var c=a[i],u="-",p=0,h={classList:[],checkThreshold:function(e,t,a){void 0!==a&&a<=e?this.add("threshold-max"):void 0!==t&&t<=e&&this.add("threshold-min")},add:function(e){this.classList.push(e)}};if(i in l&&"__start_time"!==i&&"__duration"!==i){var f,g=document.createElement("td"),v=l[i];switch(c.type){case"seconds":p=parseFloat(v),u=L.view.formatSeconds(p),h.checkThreshold(p,c.thresholdMin,c.thresholdMax),s.add(i,p),g.textContent=u;break;case"bytes":p=parseFloat(v),u=L.view.formatBytes(p),h.checkThreshold(p,c.thresholdMin,c.thresholdMax),s.add(i,p),g.textContent=u;break;case"unixtime":p=parseInt(v),u=L.view.formatUnixtime(p),h.checkThreshold(p,c.thresholdMin,c.threshholdMax),g.textContent=u;break;case"integer":p=u=parseInt(v),h.checkThreshold(p,c.thresholdMin,c.threshholdMax),s.add(i,p),g.textContent=u;break;case"json":g.innerHTML=this._jsonSyntaxHighlight(JSON.stringify(JSON.parse(v),void 0,2)),h.add("json"),p=0;break;case"text":h.add("text"),o[u=v.toString()]?(o[u].classList.add("threshold-dup"),h.add("threshold-dup")):o[u]=g,p=u.toLowerCase().substring(0,32),g.ondblclick=function(e){e.preventDefault();var e=L.dom.parentPageIframe.contentDocument||L.dom.parentPageIframe.contentWindow.document,t=L.dom.parentPageIframe.contentWindow||L.dom.parentPageIframe.contentDocument.defaultView,a=e.createRange();a.selectNode(this),t.getSelection().removeAllRanges(),t.getSelection().addRange(a),e.execCommand("copy"),t.getSelection().removeAllRanges()},g.textContent=u;break;default:p=(u=v.toString()).toLowerCase().substring(0,32),g.textContent=u}for(f in g.sortValue=p,h.classList)g.classList.add(h.classList[f]);d.appendChild(g)}}}var y,C,_,b=document.createElement("tr");for(y in r.appendChild(b),a)"__start_time"!==y&&"__duration"!==y&&(C=a[y],(_=document.createElement("th")).textContent=C.title,_.style.cursor="ns-resize",_.onclick=function(e){for(var t,a,r=this,n=m,o=Array.prototype.indexOf.call(r.parentNode.children,r),s=!0,i=("n-resize"===r.style.cursor?(t=1,r.style.cursor="s-resize"):"s-resize"===r.style.cursor?(t=0,r.style.cursor="ns-resize"):(t=-1,r.style.cursor="n-resize"),n.rows);s;){for(var s=!1,l=0;l<i.length-1;l++)if(a=!1,0===t){var d=i[l],c=i[l+1];if(d.sortValue>c.sortValue){a=!0;break}}else{d=i[l].getElementsByTagName("td")[o],c=i[l+1].getElementsByTagName("td")[o];if(1===t){if(d.sortValue>c.sortValue){a=!0;break}}else if(-1===t&&d.sortValue<c.sortValue){a=!0;break}}a&&(i[l].parentNode.insertBefore(i[l+1],i[l]),s=!0,0)}},b.appendChild(_));if(s.hasData()){var I,x=document.createElement("tr");for(I in r.appendChild(x),a)if("__start_time"!==I&&"__duration"!==I){var w=a[I],P=document.createElement("th"),T=s.getSum(I)||"";switch(w.type){case"seconds":P.textContent=L.view.formatSeconds(T);break;case"bytes":P.textContent=L.view.formatBytes(T);break;default:P.textContent=T.toString()}x.appendChild(P)}}var E=document.createElement("div"),B=(E.classList.add("collector-data-table"),E.classList.add("tableFixHead"),document.createElement("table"));return B.appendChild(r),B.appendChild(m),E.appendChild(B),null!==t&&setTimeout(function(){m.rows[t].scrollIntoView({block:"start",behavior:"smooth"}),m.rows[t].style.backgroundColor="#95ff8d"},0),E},_jsonSyntaxHighlight:function(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})}}}};
/*!initJson*/L.init(initJson),L}();
